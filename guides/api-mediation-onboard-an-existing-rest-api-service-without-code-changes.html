<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>REST APIs without code changes required | Zowe Docs</title>
    <meta name="description" content="Home of Zowe documentation">
    <meta name="google-site-verification" content="FFi0biHTX9XKglMxt3n2NZkB-knrnPxIrgBXpIZqlzc">
    
    <link rel="preload" href="/docs-site/assets/css/styles.bfba75bc.css" as="style"><link rel="preload" href="/docs-site/assets/js/app.bfba75bc.js" as="script"><link rel="preload" href="/docs-site/assets/js/10.e9a818e2.js" as="script"><link rel="prefetch" href="/docs-site/assets/js/28.1379acab.js"><link rel="prefetch" href="/docs-site/assets/css/1.styles.9e1c2b82.css"><link rel="prefetch" href="/docs-site/assets/js/1.9e1c2b82.js"><link rel="prefetch" href="/docs-site/assets/css/2.styles.54c3863f.css"><link rel="prefetch" href="/docs-site/assets/js/2.54c3863f.js"><link rel="prefetch" href="/docs-site/assets/js/3.e285c9d5.js"><link rel="prefetch" href="/docs-site/assets/js/4.e5211cb0.js"><link rel="prefetch" href="/docs-site/assets/js/5.8b0ca7f7.js"><link rel="prefetch" href="/docs-site/assets/js/6.1b41f55c.js"><link rel="prefetch" href="/docs-site/assets/js/7.631b208a.js"><link rel="prefetch" href="/docs-site/assets/js/8.03a2bad5.js"><link rel="prefetch" href="/docs-site/assets/js/9.e4a3d9ce.js"><link rel="prefetch" href="/docs-site/assets/js/11.2d7bd1b8.js"><link rel="prefetch" href="/docs-site/assets/js/12.1192383a.js"><link rel="prefetch" href="/docs-site/assets/js/13.55d2fba5.js"><link rel="prefetch" href="/docs-site/assets/js/14.b4cbedb6.js"><link rel="prefetch" href="/docs-site/assets/js/15.b5c056ac.js"><link rel="prefetch" href="/docs-site/assets/js/16.67d4ace8.js"><link rel="prefetch" href="/docs-site/assets/js/17.691ceff0.js"><link rel="prefetch" href="/docs-site/assets/js/18.344b4915.js"><link rel="prefetch" href="/docs-site/assets/js/19.e2e2c20f.js"><link rel="prefetch" href="/docs-site/assets/js/20.09b64ba6.js"><link rel="prefetch" href="/docs-site/assets/js/21.b3280302.js"><link rel="prefetch" href="/docs-site/assets/js/22.eca3a227.js"><link rel="prefetch" href="/docs-site/assets/js/23.b202d2af.js"><link rel="prefetch" href="/docs-site/assets/js/24.a49a27f0.js"><link rel="prefetch" href="/docs-site/assets/js/25.3080f846.js"><link rel="prefetch" href="/docs-site/assets/js/26.2a11cd3d.js"><link rel="prefetch" href="/docs-site/assets/js/27.6fc3fbfd.js"><link rel="prefetch" href="/docs-site/assets/js/29.1ccbd98c.js"><link rel="prefetch" href="/docs-site/assets/js/30.15cff96c.js"><link rel="prefetch" href="/docs-site/assets/js/31.bf7095ad.js"><link rel="prefetch" href="/docs-site/assets/js/32.4daea9da.js"><link rel="prefetch" href="/docs-site/assets/js/33.46176f77.js"><link rel="prefetch" href="/docs-site/assets/js/34.8f233c77.js"><link rel="prefetch" href="/docs-site/assets/js/35.e428890b.js"><link rel="prefetch" href="/docs-site/assets/js/36.6108a9b8.js"><link rel="prefetch" href="/docs-site/assets/js/37.10be8927.js"><link rel="prefetch" href="/docs-site/assets/js/38.59b27a6c.js"><link rel="prefetch" href="/docs-site/assets/js/39.b9c73f44.js"><link rel="prefetch" href="/docs-site/assets/js/40.a9f1d315.js"><link rel="prefetch" href="/docs-site/assets/js/41.d82138c0.js"><link rel="prefetch" href="/docs-site/assets/js/42.8febc921.js"><link rel="prefetch" href="/docs-site/assets/js/43.089ead82.js"><link rel="prefetch" href="/docs-site/assets/js/44.96f099c5.js"><link rel="prefetch" href="/docs-site/assets/js/45.ec9e8912.js"><link rel="prefetch" href="/docs-site/assets/js/46.d2e1c8c1.js"><link rel="prefetch" href="/docs-site/assets/js/47.7bf7619b.js"><link rel="prefetch" href="/docs-site/assets/js/48.521b1ba3.js"><link rel="prefetch" href="/docs-site/assets/js/49.ec33594e.js"><link rel="prefetch" href="/docs-site/assets/js/50.3bf7c55e.js"><link rel="prefetch" href="/docs-site/assets/js/51.e97cc430.js"><link rel="prefetch" href="/docs-site/assets/js/52.a5b3b3d5.js"><link rel="prefetch" href="/docs-site/assets/js/53.fce6f38b.js"><link rel="prefetch" href="/docs-site/assets/js/54.4b9080fb.js"><link rel="prefetch" href="/docs-site/assets/js/55.ad14d36b.js"><link rel="prefetch" href="/docs-site/assets/js/56.514f2f86.js"><link rel="prefetch" href="/docs-site/assets/js/57.6073ab39.js"><link rel="prefetch" href="/docs-site/assets/js/58.406d3377.js"><link rel="prefetch" href="/docs-site/assets/js/59.7c8cbcb4.js"><link rel="prefetch" href="/docs-site/assets/js/60.a61d286a.js"><link rel="prefetch" href="/docs-site/assets/js/61.420188af.js"><link rel="prefetch" href="/docs-site/assets/js/62.4771c214.js"><link rel="prefetch" href="/docs-site/assets/js/63.6703c9ed.js"><link rel="prefetch" href="/docs-site/assets/js/64.8c97c0cd.js"><link rel="prefetch" href="/docs-site/assets/js/65.9f7358f2.js"><link rel="prefetch" href="/docs-site/assets/js/66.6a5f5568.js"><link rel="prefetch" href="/docs-site/assets/js/67.76c19e5f.js"><link rel="prefetch" href="/docs-site/assets/js/68.a663874d.js"><link rel="prefetch" href="/docs-site/assets/js/69.8ccf0b76.js"><link rel="prefetch" href="/docs-site/assets/js/70.a1e7666f.js"><link rel="prefetch" href="/docs-site/assets/js/71.bb48ebee.js"><link rel="prefetch" href="/docs-site/assets/js/72.7497ff3d.js">
    <link rel="stylesheet" href="/docs-site/assets/css/styles.bfba75bc.css"><link rel="stylesheet" href="/docs-site/assets/css/1.styles.9e1c2b82.css"><link rel="stylesheet" href="/docs-site/assets/css/2.styles.54c3863f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs-site/" class="home-link router-link-active"><!----> <span class="site-name">
      Zowe Docs
    </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs-site/guides/intro.html" class="nav-link">Developer Tutorials</a></div><div class="nav-item"><a href="/docs-site/samples/intro.html" class="nav-link">Samples</a></div><div class="nav-item"><a href="/docs-site/user-guide/aboutthisdoc.html" class="nav-link">User Guide</a></div><div class="nav-item"><a href="https://zowe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zowe.org
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zowe/docs-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs-site/guides/intro.html" class="nav-link">Developer Tutorials</a></div><div class="nav-item"><a href="/docs-site/samples/intro.html" class="nav-link">Samples</a></div><div class="nav-item"><a href="/docs-site/user-guide/aboutthisdoc.html" class="nav-link">User Guide</a></div><div class="nav-item"><a href="https://zowe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zowe.org
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zowe/docs-site" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs-site/guides/intro.html" class="sidebar-link">Developer Tutorials</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Getting Started with zLUX</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Providing Liberty APIs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Onboard REST APIs to the API Mediation Layer</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/docs-site/guides/api-mediation-onboard-a-sprint-boot-rest-api-service.html" class="sidebar-link">Java  REST APIs with Spring Boot</a></li><li><a href="/docs-site/guides/api-mediation-onboard-an-existing-java-rest-api-service-without-spring-boot-with-zowe-api-mediation-layer.html" class="sidebar-link">Onboard an existing Java REST API service without Spring Boot with Zowe API Mediation Layer</a></li><li><a href="/docs-site/guides/api-mediation-onboard-an-existing-java-jersey-rest-api-service.html" class="sidebar-link">Java Jersey REST APIs</a></li><li><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html" class="active sidebar-link">REST APIs without code changes required</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#identify-the-api-that-you-want-to-expose" class="sidebar-link">Identify the API that you want to expose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#route-your-api" class="sidebar-link">Route your API</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#define-your-service-and-api-in-yaml-format" class="sidebar-link">Define your service and API in YAML format</a></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#configuration-parameters" class="sidebar-link">Configuration parameters</a></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#add-and-validate-the-definition-in-the-api-mediation-layer-running-on-your-machine" class="sidebar-link">Add and validate the definition in the API Mediation Layer running on your machine</a></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#add-a-definition-in-the-api-mediation-layer-in-the-zowe-runtime" class="sidebar-link">Add a definition in the API Mediation Layer in the Zowe runtime</a></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#optional-check-the-log-of-the-api-mediation-layer" class="sidebar-link">(Optional) Check the log of the API Mediation Layer</a></li><li class="sidebar-sub-header"><a href="/docs-site/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.html#optional-reload-the-services-definition-after-the-update-when-the-api-mediation-layer-is-already-started" class="sidebar-link">(Optional) Reload the services definition after the update when the API Mediation Layer is already started</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Developing for Zowe CLI</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"><div class="page-edit"><div class="header-title"><h1>REST APIs without code changes required</h1></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/19/2018, 3:34:08 PM</span></div> <div class="edit-link"><a href="https://github.com/zowe/docs-site/edit/master/docs/guides/api-mediation-onboard-an-existing-rest-api-service-without-code-changes.md" target="_blank" rel="noopener noreferrer">Propose content change in GitHub.</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="header-underline"></div></div> <div class="content"><h1 id="rest-apis-without-code-changes-required"><a href="#rest-apis-without-code-changes-required" aria-hidden="true" class="header-anchor">#</a> REST APIs without code changes required</h1> <p>As a user of Zowe API Mediation Layer, onboard a REST API service with the Zowe API Mediation Layer without changing the code of the API service. The following procedure is an overview of steps to onboard an API service through the API Gateway in the API Mediation Layer.</p> <p><strong>Follow these steps:</strong></p> <ol><li><a href="#identify-the-api-that-you-want-to-expose">Identify the API that you want to expose</a></li> <li><a href="#route-your-api">Route your API</a></li> <li><a href="#define-your-service-and-api-in-yaml-format">Define your service and API in YAML format</a></li> <li><a href="#configuration-parameters">Configuration parameters</a></li> <li><a href="#add-and-validate-the-definition-in-the-api-mediation-layer-running-on-your-machine">Add and validate the definition in the API Mediation Layer running on your machine</a></li> <li><a href="#add-a-definition-in-the-api-mediation-layer-in-the-zowe-runtime">Add a definition in the API Mediation Layer in the Zowe runtime</a></li> <li><a href="#optional-check-the-log-of-the-api-mediation-layer">(Optional) Check the log of the API Mediation Layer</a></li> <li><a href="#optional-reload-the-services-definition-after-the-update-when-the-api-mediation-layer-is-already-started">(Optional) Reload the services definition after the update when the API Mediation Layer is already started</a></li></ol> <h2 id="identify-the-api-that-you-want-to-expose"><a href="#identify-the-api-that-you-want-to-expose" aria-hidden="true" class="header-anchor">#</a> Identify the API that you want to expose</h2> <p>Onboard an API service through the API Gateway without making code changes.</p> <p><strong>Follow these steps:</strong></p> <ol><li><p>Identify the following parameters of your API service:</p> <ul><li>Hostname</li> <li>Port</li> <li>(Optional) base path where the service is available.
This URL is called base URL of the service.</li></ul> <p><strong>Example:</strong></p> <p>In the sample service described earlier, the URL of the service is: <code>http://localhost:8080</code>.</p></li> <li><p>Identify all APIs that this service provides that you want to expose through the API Gateway.</p> <p><strong>Example:</strong></p> <p>In the sample service, this REST API is the one available at the path <code>/v2</code> relative to base URL of the service. This API is version     2 of the Pet Store API.</p></li> <li><p>Choose the <em>service ID</em> of your service. The <em>service ID</em> identifies the service in the API Gateway. The service ID is an alphanumeric string in lowercase ASCII.</p> <p><strong>Example:</strong></p> <p>In the sample service, the <em>service ID</em> is <code>petstore</code>.</p></li> <li><p>Decide which URL to use to make this API available in the API Gateway. This URL is refered to as the gateway URL and is composed of the API type and the major version.</p> <p><strong>Example:</strong></p> <p>In the sample service, we provide a REST API. The first segment is <code>/api</code>. To indicate that this is version 2, the second segment is <code>/v2</code>.</p></li></ol> <h3 id="route-your-api"><a href="#route-your-api" aria-hidden="true" class="header-anchor">#</a> Route your API</h3> <p>After you identify the APIs you want to expose, define the <em>routing</em> of your API. Routing is the process of sending requests from the API gateway to a specific API service. Route your API by using the same format as in the following <code>petstore</code> example.</p> <p><strong>Note:</strong> The API Gateway differentiates major versions of an API.</p> <p><strong>Example:</strong></p> <p>To access version 2 of the <code>petstore</code> API use the following gateway URL:</p> <p><code>https://gateway-host:port/api/v2/petstore</code></p> <p>The base URL of the version 2 of the <code>petstore</code> API is:</p> <p><code>http://localhost:8080/v2</code></p> <p>The API Gateway routes REST API requests from the gateway URL <code>https://gateway:port/api/v2/petstore</code> to the service <code>http://localhost:8080/v2</code>. This method provides access to the service in the API Gateway through the gateway URL.</p> <p><strong>Note:</strong> This method enables you to access the service through a stable URL and move the service to another machine without changing the gateway URL. Accessing a service through the API Gateway also enables you to have multiple instances of the service running on different machines to achieve high-availability.</p> <h2 id="define-your-service-and-api-in-yaml-format"><a href="#define-your-service-and-api-in-yaml-format" aria-hidden="true" class="header-anchor">#</a> Define your service and API in YAML format</h2> <p>Define your service and API in YAML format in the same way as presented in the following sample <code>petstore</code> service example.</p> <p><strong>Example:</strong></p> <p>To define your service in YAML format, provide the following definition in a YAML file as in the following sample <code>petstore</code> service:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">serviceId</span><span class="token punctuation">:</span> petstore
      <span class="token key atrule">instanceBaseUrls</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8080</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">gatewayUrl</span><span class="token punctuation">:</span> api/v2
          <span class="token key atrule">serviceRelativeUrl</span><span class="token punctuation">:</span> /v2
</code></pre></div><p>In this example, a suitable name for the file is <code>petstore.yml</code>.</p> <p><strong>Notes:</strong></p> <ul><li><p>The filename does not need to follow specific naming conventions but it requires the <code>.yml</code> extension.</p></li> <li><p>The file can contain one or more services defined under the <code>services:</code> node.</p></li> <li><p>Each service has a service ID. In this example, the service ID is <code>petstore</code>. The service can have one or more instances. In this case, only one instance <code>http://localhost:8080</code> is used.</p></li> <li><p>A service can provide multiple APIs that are routed by the API Gateway. In this case, requests with the relative base path <code>api/v2</code> at the API Gateway (full gateway URL: <code>https://gateway:port/api/v2/...</code>) are routed to the relative base path <code>/v2</code> at the full URL of the service (<code>http://localhost:8080/v2/...</code>).</p></li></ul> <p><strong>Tips:</strong></p> <ul><li><p>There are more examples of API definitions in https://github.com/gizafoundation/api-layer/tree/master/config/local/api-defs.</p></li> <li><p>For more details about how to use YAML format, see https://learnxinyminutes.com/docs/yaml/</p></li></ul> <h2 id="configuration-parameters"><a href="#configuration-parameters" aria-hidden="true" class="header-anchor">#</a> Configuration parameters</h2> <p>The following list describes the configuration parameters:</p> <ul><li><p><strong>serviceId</strong></p> <p>Specifies the service instance identifier that is registered in the API Mediation Layer installation.
The service ID is used in the URL for routing to the API service through the gateway.
The service ID uniquely identifies the service in the API Mediation Layer.
The system administrator at the customer site defines this parameter.</p> <p><strong>Important!</strong>  Ensure that the service ID is set properly with the following considerations:</p> <ul><li>When two API services use the same service ID, the API gateway considers the services to be clones (two instances for the same service). An incoming API request can be routed to either of them.</li> <li>The same service ID should be set only for multiple API service instances for API scalability.</li> <li>The service ID value must contain only lowercase alphanumeric characters.</li> <li>The service ID cannot contain more than 40 characters.</li> <li>The service ID is linked to security resources. Changes to the service ID require an update of security resources.</li></ul> <p><strong>Examples:</strong></p> <ul><li><p>If the customer system administrator sets the service ID to <code>sysviewlpr1</code>,
the API URL in the API Gateway appears as the following URL:</p> <p><code>https://gateway:port/api/v1/sysviewlpr1/...</code></p></li> <li><p>If customer system administrator sets the service ID to <code>vantageprod1</code>,
the API URL in the API Gateway appears as the following URL:</p> <p><code>http://gateway:port/api/v1/vantageprod1/...</code></p></li></ul></li> <li><p><strong>baseUrl</strong></p> <p>Specifies the URL to your service to the REST resource. It will be the prefix for the following URLs:</p> <ul><li><strong>homePageRelativeUrl</strong></li> <li><strong>statusPageRelativeUrl</strong></li> <li><strong>healthCheckRelativeUrl</strong></li></ul> <p><strong>Examples:</strong></p> <ul><li><code>http://host:port/serviceid</code> for an HTTP service</li> <li><code>https://host:port/serviceid</code> for an HTTPS service</li></ul></li> <li><p><strong>homePageRelativeUrl</strong></p> <p>Specifies the relative path to the homepage of your service. The path should start with <code>/</code>.
If your service has no homepage, omit this parameter.</p> <p><strong>Examples:</strong></p> <ul><li><code>homePageRelativeUrl: /</code> The service has homepage with URL <code>${baseUrl}/</code></li> <li><code>homePageRelativeUrl: /ui/</code> The service has homepage with URL <code>${baseUrl}/ui/</code></li> <li><code>homePageRelativeUrl:</code> The service has homepage with URL <code>${baseUrl}</code></li></ul></li> <li><p><strong>statusPageRelativeUrl</strong></p> <p>Specifies the relative path to the status page of your service.
Start this path with <code>/</code>. If you service has not a status page, omit this parameter.</p> <p><strong>Example:</strong></p> <ul><li><code>statusPageRelativeUrl: /application/info</code> the result URL will be <code>${baseUrl}/application/info</code></li></ul></li> <li><p><strong>healthCheckRelativeUrl</strong></p> <p>Specifies the relative path to the health check endpoint of your service.
Start this URL with <code>/</code>. If your service does not have a health check endpoint, omit this parameter.</p> <p><strong>Example:</strong></p> <ul><li><code>healthCheckRelativeUrl: /application/health</code>. This results in the URL:
<code>${baseUrl}/application/health</code></li></ul></li> <li><p><strong>routes</strong></p> <p>The routing rules between the gateway service and your service.</p> <ul><li><p><strong>routes.gatewayUrl</strong></p> <p>Both <em>gateway-url</em> and <em>service-url</em> parameters specify how the API service endpoints are mapped to the API
gateway endpoints. The <em>gateway-url</em> parameter sets the target endpoint on the gateway.</p></li> <li><p><strong>routes.serviceUrl</strong></p> <p>Both <em>gateway-url</em> and <em>service-url</em> parameters specify how the API service endpoints are mapped to the API
gateway endpoints. The <em>service-url</em> parameter points to the target endpoint on the gateway.</p></li></ul></li></ul> <h2 id="add-and-validate-the-definition-in-the-api-mediation-layer-running-on-your-machine"><a href="#add-and-validate-the-definition-in-the-api-mediation-layer-running-on-your-machine" aria-hidden="true" class="header-anchor">#</a> Add and validate the definition in the API Mediation Layer running on your machine</h2> <p>After you define the service in YAML format, you are ready to add your service definition to the API Mediation Layer ecosystem.</p> <p>The following procedure describes how to add your service to the API Mediation Layer on your local machine.</p> <p><strong>Follow these steps:</strong></p> <ol><li><p>Copy or move your YAML file to the <code>config/local/api-defs</code> directory in the directory with API Mediation layer.</p></li> <li><p>Start the API Mediation Layer services.</p> <p><strong>Tip:</strong> For more information about how to run the API Mediation Layer locally, see <a href="https://github.com/gizafoundation/api-layer/blob/master/docs/local-configuration.md" target="_blank" rel="noopener noreferrer">Running the API Mediation Layer on Local Machine.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>Run your Java application.</p> <p><strong>Tip:</strong> Wait for the services to be ready. This process may take a few minutes.</p></li> <li><p>Go to the following URL to reach the API Gateway (port 10010) and see the paths that are routed by the API Gateway:</p> <p><code>https://localhost:10010/application/routes</code></p> <p>The following line should appear:</p> <p><code>/api/v2/petstore/**: &quot;petstore&quot;</code></p> <p>This line indicates that requests to relative gateway paths that start with <code>/api/v2/petstore/</code> are routed to the service with the service ID <code>petstore</code>.</p> <p>You successfully defined your Java application if your service is running and you can access the service endpoints. The following example is the service endpoint for the sample application:</p> <p><code>https://localhost:10010/api/v2/petstore/pets/1</code></p></li></ol> <h2 id="add-a-definition-in-the-api-mediation-layer-in-the-zowe-runtime"><a href="#add-a-definition-in-the-api-mediation-layer-in-the-zowe-runtime" aria-hidden="true" class="header-anchor">#</a> Add a definition in the API Mediation Layer in the Zowe runtime</h2> <p>After you define and validate the service in YAML format, you are ready to add your service definition to the API Mediation Layer running as part of the Zowe runtime installation.</p> <p><strong>Follow these steps:</strong></p> <ol><li><p>Locate the Zowe runtime directory. The Zowe runtime directory is chosen during Zowe installation.
The location of the directory is in the <code>zowe-install.yaml</code> file in the variable <code>install:rootDir</code>.</p> <p><strong>Note:</strong> We use the <code>${zoweRuntime}</code> symbol in following instructions.</p></li> <li><p>Copy your YAML file to the <code>${zoweRuntime}/api-mediation/api-defs</code> directory.</p></li> <li><p>Run your application.</p></li> <li><p>Restart Zowe runtime or follow steps in section <a href="#optional-reload-the-services-definition-after-the-update-when-the-api-mediation-layer-is-already-started">(Optional) Reload the services definition after the update when the API Mediation Layer is already started</a>.</p></li> <li><p>Go to the following URL to reach the API Gateway (default port 7554) and see the paths that are routed by the API Gateway: https://${zoweHostname}😒{gatewayHttpsPort}/application/routes</p> <p>The following line should appear:</p> <p><code>/api/v2/petstore/**: &quot;petstore&quot;</code></p> <p>This line indicates that requests to the relative gateway paths that start with <code>/api/v2/petstore/</code> are routed to the service with service ID <code>petstore</code>.</p> <p>You successfully defined your Java application if your service is running and you can access its endpoints. The endpoint displayed for the sample application is: <code>https://l${zoweHostname}:${gatewayHttpsPort}/api/v2/petstore/pets/1</code></p></li></ol> <h2 id="optional-check-the-log-of-the-api-mediation-layer"><a href="#optional-check-the-log-of-the-api-mediation-layer" aria-hidden="true" class="header-anchor">#</a> (Optional) Check the log of the API Mediation Layer</h2> <p>The API Mediation Layer prints the following messages to its log when the API definitions are processed:</p> <pre><code>    Scanning directory with static services definition: config/local/api-defs
    Static API definition file: /Users/plape03/workspace/api-layer/config/local/api-defs/petstore.yml
    Adding static instance STATIC-localhost:petstore:8080 for service ID petstore mapped to URL http://localhost:8080
</code></pre> <h2 id="optional-reload-the-services-definition-after-the-update-when-the-api-mediation-layer-is-already-started"><a href="#optional-reload-the-services-definition-after-the-update-when-the-api-mediation-layer-is-already-started" aria-hidden="true" class="header-anchor">#</a> (Optional) Reload the services definition after the update when the API Mediation Layer is already started</h2> <p>The following procedure enables you to refresh the API definitions after you change the definitions when the API Mediation Layer is already running.</p> <p><strong>Follow these steps:</strong></p> <ol><li><p>Use a REST API client to issue a POST request to the Discovery Service (port 10011):</p> <p><code>http://localhost:10011/discovery/api/v1/staticApi</code></p> <p>The Discovery Service requires authentication. If the API Mediation Layer is running on your local machine, the user ID is <code>eureka</code>, and the password is <code>password</code>.</p> <p>This example uses the <a href="https://httpie.org" target="_blank" rel="noopener noreferrer">HTTPie command-line HTTP client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <pre><code> http -j -a eureka:password POST `http://localhost:10011/discovery/api/v1/staticApi`
</code></pre></li> <li><p>Check if your updated definition is effective.</p> <p><strong>Notes:</strong></p> <ul><li><p>It can take up to 30 seconds for the API Gateway to pick up the new routing.</p></li> <li><p>The basic authentication will be replaced by client certificates when the Discovery Service is updated to use HTTPS.</p></li></ul></li></ol></div> <div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs-site/guides/api-mediation-onboard-an-existing-java-jersey-rest-api-service.html" class="prev">
          Java Jersey REST APIs
        </a></span> <span class="next"><a href="/docs-site/guides/cli-devTutorials.html">
          Developing for Zowe CLI
        </a> →
      </span></p></div> </div></div></div>
    <script src="/docs-site/assets/js/10.e9a818e2.js" defer></script><script src="/docs-site/assets/js/app.bfba75bc.js" defer></script>
  </body>
</html>
