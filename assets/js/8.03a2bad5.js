(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{243:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("As an API developer, use this guide to onboard your Java Jersey REST API service into the Zowe API Mediation Layer. This article outlines a step-by-step process to make your API service available in the API Mediation Layer.")]),t._v(" "),s("p",[t._v("The following procedure is an overview of steps to onboard a Java Jersey REST API application with the API Mediation Layer.")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("The first step to onboard a Java Jersey REST API into the Zowe ecosystem is to get enabler annotations from the Artifactory. Enablers prepare your service for discovery and for the retrieval of Swagger documentation.")]),t._v(" "),s("p",[t._v("You can use either Gradle or Maven build automation systems.")]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Use the following procedure if you use Gradle as your build automation system.")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("Use the following procedure if you use Maven as your build automation system.")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("After you externalize the parameters to make them readable through Tomcat,\nyou are ready to run your service in the APIM Ecosystem.")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),s("ol",[s("li",[s("p",[t._v("Run the following services to onboard your application:")]),t._v(" "),s("p",[s("strong",[t._v("Tip:")]),t._v(" For more information about how to run the API Mediation Layer locally, see "),s("a",{attrs:{href:"https://github.com/gizafoundation/api-layer/blob/master/docs/local-configuration.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Running the API Mediation Layer on Local Machine."),s("OutboundLink")],1)]),t._v(" "),t._m(19)]),t._v(" "),t._m(20),t._v(" "),t._m(21)]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("The following procedure enables you to check if your service is discoverable by\nthe Discovery Service.")]),t._v(" "),t._m(23),t._v(" "),t._m(24)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"java-jersey-rest-apis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-jersey-rest-apis","aria-hidden":"true"}},[this._v("#")]),this._v(" Java Jersey REST APIs")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ol",[a("li",[a("p",[a("a",{attrs:{href:"#get-enablers-from-the-artifactory"}},[this._v("Get enablers from the Artifactory")])])]),this._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#externalize-parameters"}},[this._v("Externalize parameters")])])]),this._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#run-your-service"}},[this._v("Run your service")])])]),this._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#validate-discovery-of-the-api-service-by-the-discovery-service"}},[this._v("Validate discovery of the API service by the Discovery Service")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"get-enablers-from-the-artifactory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-enablers-from-the-artifactory","aria-hidden":"true"}},[this._v("#")]),this._v(" Get enablers from the Artifactory")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"gradle-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle-guide","aria-hidden":"true"}},[this._v("#")]),this._v(" Gradle guide")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[s("strong",[t._v("Tip:")]),t._v(" To migrate from Maven to Gradle, go to your project directory and run "),s("code",[t._v("gradle init")]),t._v(". This converts the Maven build to a Gradle build by generating a "),s("em",[t._v("setting.gradle")]),t._v(" file and a "),s("em",[t._v("build.gradle")]),t._v(" file.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[s("p",[t._v("Create a "),s("em",[t._v("gradle.properties")]),t._v(" file in the root of your project.")])]),t._v(" "),s("li",[s("p",[t._v("In the "),s("em",[t._v("gradle.properties")]),t._v(" file, set the following URL of the repository and customize the values of your credentials to access the repository.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# Repository URL for getting the enabler-jersey artifact\nartifactoryMavenRepo=https://gizaartifactory.jfrog.io/gizaartifactory/libs-release\n\n# Artifactory credentials for builds:\nmavenUser={username}\nmavenPassword={password}\n")])])]),s("p",[t._v("This file specifies the URL for the repository of the Artifactory. The enabler-jersey artifacts are downloaded from this repository.")])]),t._v(" "),s("li",[s("p",[t._v("Add the following Gradle code block to the "),s("em",[t._v("build.gradle")]),t._v(" file:")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("ext"),s("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("mavenRepository "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nmaven "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    url artifactoryMavenSnapshotRepo\n    credentials "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        username mavenUser\n        password mavenPassword\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nrepositories mavenRepositories\n\n")])])]),s("p",[t._v("The "),s("code",[t._v("ext")]),t._v(" object declares the "),s("code",[t._v("mavenRepository")]),t._v(" property. This property is used as the project repository.")])]),t._v(" "),s("li",[s("p",[t._v("In the same "),s("em",[t._v("build.gradle")]),t._v(" file, add the following code to the dependencies code block to add the enabler-jersey artifact as a dependency of your project:")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("  "),s("span",{attrs:{class:"token function"}},[t._v("compile")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'com.ca.mfaas.sdk'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{attrs:{class:"token string"}},[t._v("'mfaas-integration-enabler-jersey'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" version"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'0.2.0'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("In your project directory, run the "),s("code",[t._v("gradle build")]),t._v(" command to build your project.")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"maven-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven-guide","aria-hidden":"true"}},[this._v("#")]),this._v(" Maven guide")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[s("strong",[t._v("Tip:")]),t._v(" To migrate from Gradle to Maven, go to your project directory and run "),s("code",[t._v("gradle install")]),t._v(". This command automatically generates a "),s("em",[t._v("pom-default.xml")]),t._v(" inside the "),s("em",[t._v("build/poms")]),t._v(" subfolder where all of the dependencies are contained.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[s("p",[t._v("Add the following "),s("em",[t._v("xml")]),t._v(" tags within the newly created "),s("em",[t._v("pom.xml")]),t._v(" file:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("repositories")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("repository")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("libs-release"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("libs-release"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("url")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("https://gizaartifactory.jfrog.io/gizaartifactory/libs-release"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("url")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("snapshots")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n         "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("enabled")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("false"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("enabled")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("snapshots")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("repository")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("repositories")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("This file specifies the URL for the repository of the Artifactory where you download the enabler-jersey artifacts.")])]),t._v(" "),s("li",[s("p",[t._v("In the same file, copy the following "),s("em",[t._v("xml")]),t._v(" tags to add the enabler-jersey artifact as a dependency of your project:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v(" "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.ca.mfaas.sdk"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mfaas-integration-enabler-jersey"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.2.0"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Create a "),s("em",[t._v("settings.xml")]),t._v(" file and copy the following "),s("em",[t._v("xml")]),t._v(" code block which defines the credentials for the Artifactory:")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("settings")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/SETTINGS/1.0.0"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{attrs:{class:"token attr-name"}},[s("span",{attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n      "),s("span",{attrs:{class:"token attr-name"}},[s("span",{attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://maven.apache.org/SETTINGS/1.0.0\n                  https://maven.apache.org/xsd/settings-1.0.0.xsd"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("servers")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("server")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("libs-release"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("username")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{username}"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("username")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("password")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{password}"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("password")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("server")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("servers")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("settings")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Copy the "),s("em",[t._v("settings.xml")]),t._v(" file inside "),s("code",[t._v("${user.home}/.m2/")]),t._v(" directory.")])]),t._v(" "),s("li",[s("p",[t._v("In the directory of your project, run the "),s("code",[t._v("mvn package")]),t._v(" command to build the project.")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"externalize-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#externalize-parameters","aria-hidden":"true"}},[this._v("#")]),this._v(" Externalize parameters")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",[t._v("By default, parameters defined inside the "),s("em",[t._v("eureka-client.properties")]),t._v(" are externalized\ndue to a "),s("code",[t._v("ServletContextListener")]),t._v(" defined in the "),s("em",[t._v("enabler-jersey")]),t._v(".  To  create your own\n"),s("code",[t._v("ServletContextListener")]),t._v(", register a "),s("code",[t._v("ServletContextListener")]),t._v(" and enable it to read all\nthe properties defined inside the ."),s("em",[t._v("properties")]),t._v(" file.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[s("p",[t._v("Define parameters that you want to externalize in a "),s("code",[t._v(".properties")]),t._v(" file.\nEnsure that this file is placed in the "),s("em",[t._v("WEB-INF")]),t._v(" folder located in the module of your service.")])]),t._v(" "),s("li",[s("p",[t._v("Before the web application is started (Tomcat), create a "),s("code",[t._v("ServletContextListener")]),t._v(" to run\nthe defined code.")]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("           "),s("span",{attrs:{class:"token keyword"}},[t._v("package")]),t._v(" com"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ca"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hwsjersey"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listeners"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" javax"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ServletContextEvent"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" javax"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ServletContextListener"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" javax"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebListener"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IOException"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" java"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Properties"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           \n           \n           "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@WebListener")]),t._v("\n           "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ExternalParameters")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ServletContextListener")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           \n               "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n               "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("contextDestroyed")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" ServletContextEvent event"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{attrs:{class:"token comment"}},[t._v("//        Filled automatically")]),t._v("\n               "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           \n               "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n               "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("contextInitialized")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" ServletContextEvent event"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           \n                   "),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" String fileName "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"/WEB-INF/external-parameters.properties"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   "),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" Properties propsFromFile "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Properties")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           \n                   System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           \n                   "),s("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                       "),s("span",{attrs:{class:"token comment"}},[t._v("// note: Try reading the external-parameters.properties file")]),t._v("\n                       System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Looking for external parameters in - "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" fileName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                       propsFromFile"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("load")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getServletContext")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getResourceAsStream")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token class-name"}},[t._v("final")]),t._v(" NullPointerException e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                       System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"I don\'t know a file like this! "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" fileName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                       System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                       "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("NullPointerException")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token class-name"}},[t._v("final")]),t._v(" IOException e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                       System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("err"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                   \n                   "),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String prop "),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" propsFromFile"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("stringPropertyNames")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                   \n                               "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" null"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                   System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Setting value "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" propsFromFile"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('" to property "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                                   System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" propsFromFile"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                               "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                   System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("print")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prop"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                               "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                   \n                           "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                   \n                           System"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   \n                       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Register the listener. Use one of the following two options:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Add the "),s("code",[t._v("@WebListener")]),t._v(" annotation to the servlet.")])]),t._v(" "),s("li",[s("p",[t._v("Reference the listener by adding the following code block to the\ndeployment descriptor "),s("em",[t._v("web.xml")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("listener")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("listener-class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("your.class.package.path"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("listener-class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("listener")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("Reference your externalized parameters in your "),s("em",[t._v("web.xml")]),t._v(" as in the following example.")]),t._v(" "),s("p",[s("strong",[t._v("Example:")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("context-param")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param-name")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{yourProperty}"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param-name")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param-value")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param-value")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("context-param")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("Note:")]),t._v(" Ensure that the parameter name is the same name as in\nthe "),s("em",[t._v("external-parameters.properties")]),t._v(".")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"run-your-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-your-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Run your service")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Note:")]),this._v(" The following procedure uses "),a("code",[this._v("localhost")]),this._v(" testing.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("Gateway Service")]),this._v(" "),a("li",[this._v("Discovery Service")]),this._v(" "),a("li",[this._v("API Catalog Service")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("p",[this._v("Run Tomcat for your Java Jersey application.")]),this._v(" "),a("p",[a("strong",[this._v("Tip:")]),this._v(" Wait for the services to be ready. This process may take a few minutes.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",[a("p",[this._v("Go to the following URL to reach the API Catalog through the Gateway (port 10010):")]),this._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("https://localhost:10010/ui/v1/caapicatalog/#/ui/dashboard\n")])])]),a("p",[this._v("You successfully onboarded your Java Jersey application if see your service\nrunning and can access the API documentation.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"optional-validate-discovery-of-the-api-service-by-the-discovery-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optional-validate-discovery-of-the-api-service-by-the-discovery-service","aria-hidden":"true"}},[this._v("#")]),this._v(" (Optional) Validate discovery of the API service by the Discovery Service")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("strong",[this._v("Follow these steps:")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",[s("li",[t._v("Go to "),s("code",[t._v("http://localhost:10011")]),t._v(".")]),t._v(" "),s("li",[t._v("Enter "),s("em",[t._v("eureka")]),t._v(" as a username and "),s("em",[t._v("password")]),t._v(" as a password.")]),t._v(" "),s("li",[t._v("Check if your application was discovered by Eureka.")])])}],!1,null,null,null);e.options.__file="api-mediation-onboard-an-existing-java-jersey-rest-api-service.md";a.default=e.exports}}]);